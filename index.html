### index.html

````html
<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Mini-FRED</title>
  <!-- Tailwind CSS -->
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@3.3.2/dist/tailwind.min.css" rel="stylesheet" />
  <!-- ApexCharts -->
  <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
</head>
<body class="bg-gray-50 text-gray-800">
  <!-- HEADER -->
  <header class="flex items-center justify-between p-4 bg-white shadow-md">
    <button id="burger" class="md:hidden">☰</button>
    <h1 class="text-xl font-semibold">Mini-FRED</h1>
    <input id="search" type="text" placeholder="Szukaj serii..." class="border rounded px-2 py-1 w-1/3" />
  </header>

  <!-- TOOLBAR -->
  <div id="toolbar" class="p-4 bg-gray-100 flex flex-wrap items-center gap-2">
    <span class="font-semibold">Zakres:</span>
    <button data-range="1" class="range-btn px-2 py-1 bg-white rounded shadow">1M</button>
    <button data-range="3" class="range-btn px-2 py-1 bg-white rounded shadow">3M</button>
    <button data-range="6" class="range-btn px-2 py-1 bg-white rounded shadow">6M</button>
    <button data-range="12" class="range-btn px-2 py-1 bg-white rounded shadow">1Y</button>
    <button data-range="60" class="range-btn px-2 py-1 bg-white rounded shadow">5Y</button>
    <button data-range="120" class="range-btn px-2 py-1 bg-white rounded shadow">10Y</button>
    <button data-range="0" class="range-btn px-2 py-1 bg-white rounded shadow">All</button>
    <input id="date-from" type="date" class="border rounded px-2 py-1" />
    <input id="date-to" type="date" class="border rounded px-2 py-1" />
    <button id="range-apply" class="px-2 py-1 bg-indigo-500 text-white rounded shadow">Apply</button>
    <label class="flex items-center space-x-1 ml-4">
      <input id="toggle-log" type="checkbox" />
      <span>Log Y</span>
    </label>
    <span class="font-semibold ml-4">MA:</span>
    <select id="ma-period" class="border rounded px-2 py-1">
      <option value="0">None</option>
      <option value="7">7</option>
      <option value="30">30</option>
      <option value="90">90</option>
    </select>
    <button id="add-ma" class="px-2 py-1 bg-green-500 text-white rounded shadow">Add MA</button>
    <button id="export-img" class="px-2 py-1 bg-gray-800 text-white rounded shadow ml-auto">Download PNG</button>
    <button id="export-csv" class="px-2 py-1 bg-gray-800 text-white rounded shadow">Export CSV</button>
  </div>

  <!-- MAIN LAYOUT -->
  <div class="flex min-h-[calc(100vh-4rem)]">
    <!-- SIDEBAR -->
    <aside id="sidebar" class="hidden md:block w-64 bg-white p-4 shadow-inner">
      <h2 class="font-semibold mb-2">Series</h2>
      <ul id="series-list" class="space-y-1 overflow-y-auto h-64 mb-4"></ul>
      <button id="add-series" class="w-full bg-blue-500 text-white py-2 rounded shadow">+ Dodaj serię</button>
      <div class="mt-6">
        <h3 class="font-semibold mb-1">Kalkulator</h3>
        <select id="calc-a" class="border rounded w-full mb-2 p-1"></select>
        <select id="calc-b" class="border rounded w-full mb-2 p-1"></select>
        <select id="calc-op" class="border rounded w-full mb-2 p-1">
          <option value="+">A + B</option>
          <option value="-">A - B</option>
          <option value="%">% Δ</option>
          <option value="Δ">Δ abs.</option>
        </select>
        <button id="calc-go" class="bg-green-500 text-white w-full py-2 rounded shadow">Oblicz</button>
      </div>
    </aside>

    <!-- CHART -->
    <main class="flex-1 p-4">
      <div id="chart"></div>
    </main>
  </div>

  <script src="app.js"></script>
</body>
</html>
```html
<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Mini-FRED</title>
  <!-- Tailwind CSS -->
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@3.3.2/dist/tailwind.min.css" rel="stylesheet" />
  <!-- ApexCharts -->
  <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
</head>
<body class="bg-gray-50 text-gray-800">
  <header class="flex items-center justify-between p-4 bg-white shadow-md">
    <button id="burger" class="md:hidden">☰</button>
    <h1 class="text-xl font-semibold">Mini-FRED</h1>
    <input id="search" type="text" placeholder="Szukaj serii..." class="border rounded px-2 py-1 w-1/3" />
  </header>

  <div id="toolbar" class="p-4 bg-gray-100 flex flex-wrap items-center space-x-2">
    <span class="font-semibold">Zakres:</span>
    <button data-range="1" class="range-btn px-2 py-1 bg-white rounded shadow">1M</button>
    <button data-range="3" class="range-btn px-2 py-1 bg-white rounded shadow">3M</button>
    <button data-range="6" class="range-btn px-2 py-1 bg-white rounded shadow">6M</button>
    <button data-range="12" class="range-btn px-2 py-1 bg-white rounded shadow">1Y</button>
    <button data-range="60" class="range-btn px-2 py-1 bg-white rounded shadow">5Y</button>
    <button data-range="120" class="range-btn px-2 py-1 bg-white rounded shadow">10Y</button>
    <button data-range="0" class="range-btn px-2 py-1 bg-white rounded shadow">All</button>

    <input id="date-from" type="date" class="border rounded px-2 py-1" />
    <input id="date-to" type="date" class="border rounded px-2 py-1" />
    <button id="range-apply" class="px-2 py-1 bg-indigo-500 text-white rounded shadow">Apply</button>

    <label class="flex items-center space-x-1">
      <input id="toggle-log" type="checkbox" />
      <span>Log Y</span>
    </label>

    <span class="font-semibold">MA:</span>
    <select id="ma-period" class="border rounded px-2 py-1">
      <option value="0">None</option>
      <option value="7">7</option>
      <option value="30">30</option>
      <option value="90">90</option>
    </select>
    <button id="add-ma" class="px-2 py-1 bg-green-500 text-white rounded shadow">Add MA</button>

    <button id="export-img" class="px-2 py-1 bg-gray-800 text-white rounded shadow">PNG</button>
    <button id="export-csv" class="px-2 py-1 bg-gray-800 text-white rounded shadow">CSV</button>
  </div>

  <div class="flex">
    <!-- Sidebar omitted for brevity; reuse previous code if needed -->
    <main class="flex-1 p-4">
      <div id="chart"></div>
    </main>
  </div>

  <script src="app.js"></script>
</body>
</html>
````

### app.js

```js
let rawData;
let seriesArr = [];
let chart;

// 1. Fetch data and init
fetch('am_data.json')
  .then(r => r.json())
  .then(json => {
    rawData = json;
    seriesArr = prepareSeries(rawData);
    initChart(seriesArr);
    setupToolbar();
    populateSeriesList(seriesArr);
    setupCalculator(seriesArr);
  });

// Prepare data
function prepareSeries(obj) {
  return Object.entries(obj).map(([key, arr]) => ({
    name: key,
    data: arr.map(pt => [new Date(pt.date).getTime(), pt.value]),
  }));
}

function initChart(series) {
  chart = new ApexCharts(document.querySelector('#chart'), {
    chart: { type: 'line', height: 400, toolbar: { show: false }, zoom: { enabled: true }, animations: { enabled: true } },
    series,
    xaxis: { type: 'datetime' },
    stroke: { curve: 'smooth', width: 2 },
    legend: { position: 'top', horizontalAlign: 'right' },
    tooltip: { x: { format: 'yyyy-MM-dd' } },
    yaxis: { logarithmic: false },
  });
  chart.render();
}

function setupToolbar() {
  // Preset ranges
  document.querySelectorAll('.range-btn').forEach(btn => {
    btn.addEventListener('click', () => {
      const m = +btn.dataset.range;
      if (m > 0) {
        const now = Date.now();
        const start = now - m * 30 * 24 * 60 * 60 * 1000;
        chart.zoomX(start, now);
      } else {
        chart.resetZoom();
      }
    });
  });
  // Custom range
  document.getElementById('range-apply').addEventListener('click', () => {
    const from = new Date(document.getElementById('date-from').value).getTime();
    const to = new Date(document.getElementById('date-to').value).getTime();
    if (!isNaN(from) && !isNaN(to)) chart.zoomX(from, to);
  });
  // Log scale toggle
  document.getElementById('toggle-log').addEventListener('change', e => {
    chart.updateOptions({ yaxis: { logarithmic: e.target.checked } });
  });
  // Add MA overlay
  document.getElementById('add-ma').addEventListener('click', () => {
    const p = +document.getElementById('ma-period').value;
    if (p > 0) {
      seriesArr.forEach(s => {
        const ma = computeMA(s.data, p);
        chart.appendSeries({
          name: `${s.name} MA${p}`,
          data: ma,
          stroke: { width: 2, dashArray: 4 },
        });
      });
    }
  });
  // Export PNG
  document.getElementById('export-img').addEventListener('click', () => {
    chart.dataURI().then(({ imgURI }) => downloadURI(imgURI, 'chart.png'));
  });
  // Export CSV
  document.getElementById('export-csv').addEventListener('click', downloadCSV);
}

function computeMA(data, period) {
  const result = [];
  for (let i = 0; i < data.length; i++) {
    const start = Math.max(0, i - period + 1);
    const slice = data.slice(start, i + 1);
    const avg = slice.reduce((sum, pt) => sum + pt[1], 0) / slice.length;
    result.push([data[i][0], parseFloat(avg.toFixed(2))]);
  }
  return result;
}

function downloadURI(uri, name) {
  const link = document.createElement('a');
  link.href = uri;
  link.download = name;
  document.body.appendChild(link);
  link.click();
  document.body.removeChild(link);
}

function downloadCSV() {
  const opts = chart.w.config.series;
  if (!opts.length) return;
  // Assume same timestamps
  const times = opts[0].data.map(pt => pt[0]);
  let csv = 'Date,' + opts.map(s => s.name).join(',') + '\n';
  times.forEach((t, i) => {
    const date = new Date(t).toISOString().split('T')[0];
    const row = [date];
    opts.forEach(s => {
      const pt = s.data.find(p => p[0] === t);
      row.push(pt ? p[1] : '');
    });
    csv += row.join(',') + '\n';
  });
  const blob = new Blob([csv], { type: 'text/csv' });
  downloadURI(URL.createObjectURL(blob), 'data.csv');
}

// ... (reuse sidebar & calculator code from previous version)

```
